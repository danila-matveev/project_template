# Проверка Pull Request

## Описание
Эта команда выполняет анализ изменений в pull request, проверяет соответствие кода стандартам проекта и предлагает возможные улучшения.

## Параметры
$ARGUMENTS — номер PR (обязательный). Пример: `/review-pull-request 19`

## Шаги

### 1. Валидация параметров
Если `$ARGUMENTS` пустой или не является числом:
- Запросить номер PR у пользователя
- Альтернативно: получить список открытых PR командой `gh pr list` и предложить выбор

### 2. Получение информации о PR
```bash
gh pr view $ARGUMENTS --json title,body,headRefName,baseRefName,number,url
```

### 3. Анализ изменений
```bash
gh pr diff $ARGUMENTS
```

Проанализировать изменения в коде на предмет:
- Потенциальных багов и ошибок
- Нарушений архитектуры проекта
- Несоответствий стилю кода
- Проблем с безопасностью
- Производительности
- Тестового покрытия

### 4. Проверка соответствия стандартам
- Документации проекта (AGENTS.md, agent_docs/)
- Существующим паттернам кода
- ADR (Architecture Decision Records)

### 5. Классификация замечаний
Для каждого найденного замечания определить приоритет:
- **P1 (Critical)** — исправить перед мержем
- **P2 (Important)** — рекомендуется исправить
- **Suggestions** — на усмотрение

### 6. Применение исправлений (если требуется)
После согласования с пользователем:
1. Внести исправления в код
2. Закоммитить и запушить изменения
3. Повторно запустить проверку при необходимости

### 7. Завершение
Сообщить пользователю:
- Статус проверки (все замечания обработаны / остались suggestions)
- Готовность PR к мержу
- Статус деплоя (если применимо)

## Поведение
- Всегда показывать замечания пользователю перед исправлением
- Спрашивать подтверждение перед каждым циклом повторной проверки
- При отсутствии замечаний — сообщить о готовности PR к мержу
- Использовать TodoWrite для отслеживания прогресса при множественных замечаниях
- Учитывать контекст проекта из agent_docs/ при анализе
